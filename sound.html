<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Воспроизведение звука - Автозвук</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <style>
    .cover {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div style="text-align: center;">
    <h1 class="animate-fade">Воспроизведение звука</h1>
    <!-- Обложка звука -->
    <img id="cover" class="cover animate-fade" style="animation-delay: 0.3s;" src="" alt="Обложка">
    <!-- Название звука -->
    <p id="soundTitle" class="animate-fade" style="animation-delay: 0.5s;"></p>
    <!-- Аудиоэлемент -->
    <audio id="sound" style="display: none;"></audio>
    <p class="animate-fade" style="animation-delay: 0.7s;">Если звук не воспроизводится автоматически, нажмите на экран.</p>
    <a class="back-button animate-fade" style="animation-delay: 0.9s;" href="catalog.html">Вернуться в каталог</a>
  </div>

  <script>
    // Функция для получения GET-параметров
    function getQueryParam(param) {
      let params = new URLSearchParams(window.location.search);
      return params.get(param);
    }
    let soundFile = getQueryParam('sound') || 'uploads/sounds/default.mp3';
    let coverFile = getQueryParam('cover') || 'assets/images/default_cover.png';
    let title = getQueryParam('title') || 'Без названия';

    // Устанавливаем источник обложки и название
    document.getElementById('cover').src = coverFile;
    document.getElementById('soundTitle').textContent = title;

    let audio = document.getElementById('sound');
    audio.src = soundFile;

    // Автозапуск после клика
    document.addEventListener("click", function() {
      audio.play();
    }, { once: true });

    // Попытка автозапуска при загрузке
    document.addEventListener("DOMContentLoaded", function() {
      audio.play().catch(err => console.log("Автовоспроизведение заблокировано"));
    });
  </script>
</body>
</html>
